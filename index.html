<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sinh Học 8 - Thầy Lâm: Sài Gòn 1960</title>
    
    <!-- Google Fonts: Playfair Display (Tiêu đề báo chí) & Courier Prime (Máy đánh chữ) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Cấu hình Tailwind - Saigon 1960s Palette -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'sg-cream': '#fdf6e3', /* Màu giấy cũ */
                        'sg-teal': '#265c58', /* Xanh cổ vịt (Retro Teal) */
                        'sg-red': '#cb4b16', /* Đỏ gạch (Brick Red) */
                        'sg-yellow': '#b58900', /* Vàng mù tạt */
                        'sg-dark': '#073642', /* Màu mực đậm */
                        'sg-border': '#586e75', /* Viền xám xanh */
                    },
                    fontFamily: {
                        'retro-head': ['"Playfair Display"', 'serif'], /* Font biển hiệu */
                        'retro-body': ['"Courier Prime"', 'monospace'], /* Font máy đánh chữ */
                    },
                    boxShadow: {
                        'retro': '4px 4px 0px 0px #265c58', /* Đổ bóng cứng */
                        'retro-hover': '6px 6px 0px 0px #cb4b16',
                        'paper': '1px 1px 3px rgba(0,0,0,0.1), inset 0 0 20px rgba(0,0,0,0.05)',
                    }
                }
            }
        }
    </script>

    <!-- MathJax Configuration -->
    <script>
        window.MathJax = {
            loader: { load: ['input/tex', 'output/chtml'] },
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            chtml: {
                displayAlign: 'center'
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <style>
        /* Retro Textures & Styles */
        body {
            background-color: #fdf6e3;
            /* Họa tiết nhiễu hạt (Noise texture) để tạo cảm giác giấy cũ */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            color: #073642;
        }

        .vintage-border {
            border: 2px solid #265c58;
            border-radius: 2px;
        }

        .glass-panel {
            background: rgba(253, 246, 227, 0.9);
            border: 1px solid #586e75;
            box-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        /* Active Tab - Thẻ thư viện cũ */
        .active-tab {
            background-color: #eee8d5;
            color: #cb4b16; /* Đỏ gạch */
            border-bottom: 3px solid #cb4b16;
            font-family: 'Playfair Display', serif;
            font-weight: 700;
        }

        /* Active Mobile Tab */
        .active-mobile-tab {
            background-color: #eee8d5;
            color: #cb4b16;
            border-left: 4px solid #cb4b16;
            font-family: 'Playfair Display', serif;
            font-weight: 700;
        }

        /* Retro Buttons */
        .btn-retro-primary {
            background-color: #265c58;
            color: #fdf6e3;
            font-family: 'Playfair Display', serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: 2px solid #073642;
            box-shadow: 4px 4px 0px 0px #073642;
            transition: all 0.2s ease;
        }
        .btn-retro-primary:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0px 0px #cb4b16;
            background-color: #073642;
        }

        .btn-retro-secondary {
            background-color: transparent;
            color: #265c58;
            font-family: 'Courier Prime', monospace;
            font-weight: bold;
            border: 2px dashed #265c58;
            transition: all 0.2s ease;
        }
        .btn-retro-secondary:hover {
            background-color: #eee8d5;
            color: #cb4b16;
            border-color: #cb4b16;
        }

        /* Intro Overlay Effect */
        #intro-overlay {
            transition: transform 800ms cubic-bezier(0.77, 0, 0.175, 1), opacity 800ms ease;
        }

        /* Typing cursor animation for titles */
        .typewriter::after {
            content: '|';
            animation: blink 1s step-start infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

    </style>
</head>
<body class="font-retro-body min-h-screen overflow-x-hidden selection:bg-sg-red selection:text-white">

    <!-- 1. INTRO OVERLAY (Phong cách Poster Nhạc/Phim cũ) -->
    <div id="intro-overlay" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#fdf6e3] p-6 border-[16px] border-sg-teal">
        <!-- Khung viền trang trí kiểu cũ -->
        <div class="absolute inset-4 border-2 border-dashed border-sg-red pointer-events-none"></div>
        <div class="absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/aged-paper.png')]"></div>
        
        <div class="max-w-3xl text-center space-y-6 z-10 relative">
            <div class="inline-block border-b-2 border-sg-dark pb-1 mb-4">
                <span class="text-sg-red text-xl font-retro-head tracking-[0.2em] uppercase font-bold">Giáo Khoa Thư</span>
            </div>
            
            <h1 class="text-5xl md:text-7xl font-retro-head font-black leading-none text-sg-teal uppercase drop-shadow-sm">
                Sinh Học <span class="text-sg-red text-8xl block md:inline">8</span>
            </h1>
            
            <div class="w-full h-[2px] bg-sg-dark my-4"></div>
            
            <h2 class="text-3xl md:text-4xl font-retro-head font-bold text-sg-dark">
                Hệ Nội Tiết & Da
            </h2>

            <p class="text-lg md:text-xl font-retro-body italic text-sg-border mt-6">
                "Bài giảng của Thầy Giáo Lâm - Niên khóa 1960"
            </p>
            
            <div class="mt-12 group">
                <button onclick="startLearning()" class="btn-retro-primary px-12 py-4 text-xl rounded-none">
                    Vào Lớp Học
                </button>
            </div>
        </div>
        
        <div class="absolute bottom-6 text-sm font-retro-body text-sg-border">
            An Lạc - Sài Gòn
        </div>
    </div>

    <!-- 2. MAIN APP CONTAINER -->
    <div id="app-container" class="opacity-0 transition-opacity duration-1000">
        
        <!-- NAVIGATION (Kiểu Bìa Hồ Sơ) -->
        <nav class="fixed top-0 w-full bg-[#fdf6e3] border-b-2 border-sg-teal z-40 shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <!-- Logo / Title -->
                    <div class="flex items-center space-x-4">
                        <div class="bg-sg-teal text-white w-12 h-12 flex items-center justify-center font-retro-head font-bold text-xl border-2 border-sg-dark shadow-[3px_3px_0px_#000]">
                            SH8
                        </div>
                        <div class="flex flex-col">
                            <span class="font-retro-head font-bold text-2xl text-sg-dark uppercase leading-none">Lớp Thầy Lâm</span>
                            <span class="font-retro-body text-xs text-sg-red tracking-wider uppercase">Chân trời kiến thức</span>
                        </div>
                    </div>

                    <!-- Desktop Tabs -->
                    <div class="hidden lg:flex space-x-1 h-full items-end" id="desktop-tabs-container">
                        <!-- Buttons injected via JS -->
                    </div>

                    <!-- Hamburger Button -->
                    <div class="flex items-center lg:hidden">
                        <button id="hamburger-button" onclick="toggleMenu()" class="text-sg-dark border-2 border-sg-dark p-1 hover:bg-sg-dark hover:text-white transition-colors">
                            <svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Mobile Sidebar Menu -->
        <div id="mobile-menu" class="fixed inset-y-0 left-0 w-72 bg-[#fdf6e3] border-r-4 border-sg-teal z-50 transform -translate-x-full transition-transform duration-300 lg:hidden flex flex-col shadow-[10px_0_20px_rgba(0,0,0,0.1)]">
            <div class="p-6 border-b-2 border-dashed border-sg-teal bg-[#eee8d5]">
                <span class="font-retro-head font-bold text-2xl text-sg-teal uppercase">Mục Lục</span>
                <button id="close-menu-button" onclick="toggleMenu()" class="float-right text-sg-red hover:text-sg-dark text-xl font-bold">
                    [X]
                </button>
            </div>
            <div class="flex-1 overflow-y-auto py-6 space-y-4 px-4" id="mobile-tabs-container">
                <!-- Mobile Buttons injected via JS -->
            </div>
            <div class="p-4 border-t-2 border-sg-teal text-center font-retro-body text-xs text-sg-border">
                Ấn hành tại Sài Gòn
            </div>
        </div>

        <!-- Overlay -->
        <div id="mobile-menu-overlay" onclick="toggleMenu()" class="fixed inset-0 bg-[#073642]/40 z-40 hidden lg:hidden backdrop-sepia transition-opacity"></div>

        <!-- MAIN CONTENT AREA -->
        <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-28 pb-12">
            
            <!-- Tab Content: Intro -->
            <section id="tab-content-intro" class="tab-content hidden animate-fade-in">
                <div class="bg-[#fdf6e3] relative p-8 md:p-12 border-2 border-sg-dark shadow-retro">
                    <!-- Decor góc -->
                    <div class="absolute top-2 left-2 w-4 h-4 border-t-2 border-l-2 border-sg-red"></div>
                    <div class="absolute top-2 right-2 w-4 h-4 border-t-2 border-r-2 border-sg-red"></div>
                    <div class="absolute bottom-2 left-2 w-4 h-4 border-b-2 border-l-2 border-sg-red"></div>
                    <div class="absolute bottom-2 right-2 w-4 h-4 border-b-2 border-r-2 border-sg-red"></div>

                    <h2 class="text-4xl font-retro-head font-bold text-sg-teal mb-8 text-center uppercase border-b-2 border-dashed border-sg-border pb-4">
                        Thư Ngỏ
                    </h2>
                    
                    <div class="max-w-3xl mx-auto space-y-6 text-lg">
                        <p class="mb-4 first-letter:text-5xl first-letter:font-retro-head first-letter:text-sg-red first-letter:float-left first-letter:mr-2 first-letter:mt-[-10px]">
                            Mến chào các em học sinh thân thương. Thầy là <strong>Thầy Lâm</strong>. Trong tiết học hôm nay, chúng ta sẽ cùng nhau du hành vào <em>"Vương quốc Cơ thể"</em>.
                        </p>
                        <p>
                            Hãy hình dung cơ thể chúng ta như một đô thành sầm uất. Nơi đó có những người đưa thư cần mẫn (Hệ nội tiết), những bức tường thành cổ kính rêu phong bảo vệ cư dân (Da), và một hệ thống điều hòa không khí tự nhiên tuyệt diệu (Điều hòa thân nhiệt).
                        </p>
                        
                        <div class="bg-[#eee8d5] p-6 border-l-4 border-sg-red italic text-sg-dark font-retro-body text-base mt-8">
                            "Kiến thức không chỉ là những dòng chữ in trên giấy, mà là nhịp đập của sự sống đang chảy trong huyết quản các em."
                        </div>
                        
                        <div class="mt-10 text-center">
                            <button onclick="switchTab('tab-1')" class="btn-retro-primary px-8 py-3 text-lg">
                                Lật Trang Kế Tiếp
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tab Content 1: Hệ Nội Tiết -->
            <section id="tab-content-tab-1" class="tab-content hidden animate-fade-in">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                    <!-- Kiến thức -->
                    <div class="space-y-6">
                        <h2 class="text-3xl font-retro-head font-bold text-sg-teal flex items-center gap-3 uppercase border-b border-sg-dark pb-2">
                            <span class="text-4xl text-sg-red">I.</span> Hệ Nội Tiết
                        </h2>
                        <div class="bg-white/50 p-6 border border-sg-border relative">
                             <!-- Ghim giấy (CSS art) -->
                             <div class="absolute -top-3 left-1/2 -translate-x-1/2 w-4 h-8 bg-gray-400 rounded-full border border-gray-600"></div>

                            <h3 class="font-retro-head font-bold text-xl text-sg-dark mb-4 underline decoration-sg-red decoration-2 underline-offset-4">Câu chuyện: Người Đưa Thư</h3>
                            <p class="text-sg-dark mb-4 text-justify">
                                Tưởng tượng các tuyến nội tiết như những <strong>Bưu Cục Trung Tâm</strong>, còn hormone là những bức <em>công văn khẩn</em>. Chúng không đi đường bộ, mà thả trôi theo dòng sông (mạch máu) để đến đúng địa chỉ nhà dân (cơ quan đích).
                            </p>
                            <div class="bg-[#fdf6e3] p-4 border border-sg-dark shadow-[2px_2px_0px_#aaa]">
                                <h4 class="font-retro-body font-bold text-sg-red text-sm uppercase mb-2">[ Ghi Nhớ ]</h4>
                                <p class="text-sg-dark font-bold">
                                    $$ \text{Tuyến} \xrightarrow{\text{tiết}} \text{Hormone} \xrightarrow{\text{Máu}} \text{Cơ quan đích} $$
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Simulation -->
                    <div class="bg-[#eee8d5] p-6 border-2 border-sg-dark shadow-retro flex flex-col items-center justify-center min-h-[300px]">
                        <h3 class="text-center font-retro-body font-bold text-sg-border mb-4 uppercase text-sm tracking-widest">- Minh Họa -</h3>
                        <!-- SVG Animation: Retro Colors -->
                        <svg width="300" height="200" viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg">
                            <!-- Blood Stream -->
                            <rect x="0" y="80" width="300" height="60" fill="#265c58" opacity="0.1" />
                            <text x="10" y="115" fill="#265c58" font-family="Courier Prime" font-size="12" opacity="0.6">Dòng Máu</text>

                            <!-- Gland (Sender) -->
                            <g transform="translate(30, 40)">
                                <circle cx="30" cy="30" r="25" fill="#b58900" stroke="#073642" stroke-width="2"/>
                                <text x="30" y="35" text-anchor="middle" fill="#fdf6e3" font-family="Courier Prime" font-size="10" font-weight="bold">Bưu Cục</text>
                            </g>

                            <!-- Target Cell (Receiver) -->
                            <g transform="translate(220, 40)">
                                <rect x="0" y="0" width="50" height="50" rx="2" fill="#265c58" stroke="#073642" stroke-width="2"/>
                                <path d="M 0 25 L -10 20 L -10 30 Z" fill="#265c58" stroke="#073642" stroke-width="1"/> 
                                <text x="25" y="30" text-anchor="middle" fill="#fdf6e3" font-family="Courier Prime" font-size="10" font-weight="bold">Đích</text>
                            </g>

                            <!-- Hormones (Animated Dots) -->
                            <circle cx="60" cy="70" r="5" fill="#cb4b16" stroke="#073642" stroke-width="1">
                                <animate attributeName="cy" values="70;90;100;110;70" dur="4s" repeatCount="indefinite" />
                                <animate attributeName="cx" values="60;100;180;220;220" dur="4s" repeatCount="indefinite" />
                                <animate attributeName="opacity" values="1;1;1;0;0" dur="4s" repeatCount="indefinite" />
                            </circle>
                            <circle cx="60" cy="70" r="5" fill="#cb4b16" stroke="#073642" stroke-width="1">
                                <animate attributeName="cy" values="70;90;100;110;70" dur="4s" begin="1s" repeatCount="indefinite" />
                                <animate attributeName="cx" values="60;100;180;220;220" dur="4s" begin="1s" repeatCount="indefinite" />
                                <animate attributeName="opacity" values="1;1;1;0;0" dur="4s" begin="1s" repeatCount="indefinite" />
                            </circle>
                        </svg>
                        <p class="text-xs text-center text-sg-border mt-4 font-retro-body">Hình 1.1: Cơ chế phát thư của Hormone</p>
                    </div>
                </div>
                <div class="mt-12 text-center">
                    <button onclick="switchTab('tab-2')" class="btn-retro-secondary px-6 py-2">Xem Bài Kế: Da &rarr;</button>
                </div>
            </section>

            <!-- Tab Content 2: Da -->
            <section id="tab-content-tab-2" class="tab-content hidden animate-fade-in">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                     <!-- Kiến thức -->
                     <div class="space-y-6">
                        <h2 class="text-3xl font-retro-head font-bold text-sg-teal flex items-center gap-3 uppercase border-b border-sg-dark pb-2">
                            <span class="text-4xl text-sg-red">II.</span> Cấu Tạo Da
                        </h2>
                        <div class="bg-white/50 p-6 border border-sg-border">
                            <h3 class="font-retro-head font-bold text-xl text-sg-dark mb-4 underline decoration-sg-red decoration-2 underline-offset-4">Câu chuyện: Bức Tường Thành</h3>
                            <p class="text-sg-dark mb-4 text-justify">
                                Da giống như lớp tường gạch bao quanh Sài Gòn xưa. Không chỉ là gạch đá, nó còn có lính gác (thụ quan), hệ thống thoát nước (tuyến mồ hôi) và lớp áo mưa (chất nhờn).
                            </p>
                            
                            <table class="w-full text-sm text-left border-collapse border-2 border-sg-dark font-retro-body">
                                <thead class="bg-sg-teal text-[#fdf6e3] uppercase">
                                    <tr>
                                        <th class="px-3 py-3 border border-sg-dark">Lớp</th>
                                        <th class="px-3 py-3 border border-sg-dark">Thành phần</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="hover:bg-sg-yellow/20">
                                        <td class="px-3 py-2 border border-sg-dark font-bold">Biểu bì</td>
                                        <td class="px-3 py-2 border border-sg-dark">Tầng sừng & Tế bào sống</td>
                                    </tr>
                                    <tr class="hover:bg-sg-yellow/20">
                                        <td class="px-3 py-2 border border-sg-dark font-bold">Bì</td>
                                        <td class="px-3 py-2 border border-sg-dark">Mạch máu, Thụ quan, Tuyến</td>
                                    </tr>
                                    <tr class="hover:bg-sg-yellow/20">
                                        <td class="px-3 py-2 border border-sg-dark font-bold">Mỡ</td>
                                        <td class="px-3 py-2 border border-sg-dark">Lớp đệm dự trữ</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                     <!-- Simulation -->
                     <div class="bg-[#eee8d5] p-6 border-2 border-sg-dark shadow-retro flex flex-col items-center justify-center min-h-[300px]">
                        <h3 class="text-center font-retro-body font-bold text-sg-border mb-4 uppercase text-sm tracking-widest">- Minh Họa -</h3>
                        <!-- SVG Animation: Retro Colors -->
                        <svg width="300" height="250" viewBox="0 0 300 250" xmlns="http://www.w3.org/2000/svg">
                            <!-- Layers -->
                            <path d="M0,50 Q150,40 300,50 L300,80 L0,80 Z" fill="#b58900" stroke="#073642" stroke-width="2" /> <!-- Epidermis -->
                            <rect x="0" y="80" width="300" height="120" fill="#fdf6e3" stroke="none" /> <!-- Dermis -->
                            <path d="M0,80 L300,80" stroke="#073642" stroke-width="1" stroke-dasharray="4 2"/>
                            <rect x="0" y="200" width="300" height="50" fill="#cb4b16" opacity="0.2" stroke="none" /> <!-- Hypodermis -->
                            
                            <!-- Sweat Gland -->
                            <path d="M100,180 Q80,180 80,160 Q80,140 100,140 Q120,140 120,160 Q120,180 100,180 M100,140 L100,50" 
                                  fill="none" stroke="#265c58" stroke-width="3" />
                            
                            <!-- Sweat Drop Animation -->
                            <circle cx="100" cy="50" r="4" fill="#2aa198" opacity="0" stroke="#073642" stroke-width="1">
                                <animate attributeName="cy" values="160;50;40" dur="2s" repeatCount="indefinite" />
                                <animate attributeName="opacity" values="0;1;0" dur="2s" repeatCount="indefinite" />
                                <animate attributeName="r" values="3;3;5" dur="2s" repeatCount="indefinite" />
                            </circle>
                            
                            <!-- Hair -->
                            <path d="M200,150 L220,20" stroke="#073642" stroke-width="2" />
                            
                            <!-- Labels -->
                            <text x="10" y="70" font-family="Courier Prime" font-size="10" fill="#073642" font-weight="bold">Biểu Bì</text>
                            <text x="10" y="150" font-family="Courier Prime" font-size="10" fill="#073642">Lớp Bì</text>
                            <text x="10" y="230" font-family="Courier Prime" font-size="10" fill="#cb4b16">Mỡ</text>
                        </svg>
                        <p class="text-xs text-center text-sg-border mt-4 font-retro-body">Hình 2.1: Cấu trúc lớp da</p>
                    </div>
                </div>
                <div class="mt-12 text-center">
                    <button onclick="switchTab('tab-3')" class="btn-retro-secondary px-6 py-2">Xem Bài Kế: Thân Nhiệt &rarr;</button>
                </div>
            </section>

            <!-- Tab Content 3: Điều Hòa Thân Nhiệt -->
            <section id="tab-content-tab-3" class="tab-content hidden animate-fade-in">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                     <!-- Kiến thức -->
                     <div class="space-y-6">
                        <h2 class="text-3xl font-retro-head font-bold text-sg-teal flex items-center gap-3 uppercase border-b border-sg-dark pb-2">
                            <span class="text-4xl text-sg-red">III.</span> Điều Hòa Thân Nhiệt
                        </h2>
                        <div class="bg-white/50 p-6 border border-sg-border">
                            <h3 class="font-retro-head font-bold text-xl text-sg-dark mb-4 underline decoration-sg-red decoration-2 underline-offset-4">Câu chuyện: Máy Lạnh Thiên Nhiên</h3>
                            <p class="text-sg-dark mb-4 text-justify">
                                Để giữ nhiệt độ cơ thể luôn ở mức 37°C giữa cái nắng Sài Gòn, cơ thể tự động "đóng mở cửa sổ" (mạch máu) và "bật quạt hơi nước" (đổ mồ hôi).
                            </p>
                            
                            <div class="bg-[#eee8d5] p-4 border border-sg-dark shadow-[2px_2px_0px_#aaa]">
                                <h4 class="font-retro-body font-bold text-sg-red text-sm uppercase mb-2">[ Công Thức ]</h4>
                                <p class="text-sg-dark font-bold text-sm">
                                    $$ Q_{sinh} = Q_{tỏa} \Rightarrow T \approx 37^\circ C $$
                                </p>
                            </div>
                            
                            <div class="mt-4 grid grid-cols-1 gap-3 text-sm font-retro-body">
                                <div class="bg-sg-red/10 p-3 border-l-4 border-sg-red text-sg-dark">
                                    <strong>Nắng Nóng:</strong> Mạch giãn, mồ hôi rơi $\rightarrow$ Mát.
                                </div>
                                <div class="bg-sg-teal/10 p-3 border-l-4 border-sg-teal text-sg-dark">
                                    <strong>Trời Lạnh:</strong> Mạch co, run rẩy $\rightarrow$ Ấm.
                                </div>
                            </div>
                        </div>
                    </div>

                     <!-- Simulation -->
                     <div class="bg-[#eee8d5] p-6 border-2 border-sg-dark shadow-retro flex flex-col items-center justify-center min-h-[300px]">
                        <h3 class="text-center font-retro-body font-bold text-sg-border mb-4 uppercase text-sm tracking-widest">- Minh Họa -</h3>
                        <!-- SVG Animation: Retro Colors -->
                        <svg width="300" height="200" viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg">
                            <!-- Skin Surface -->
                            <path d="M0,20 Q150,15 300,20" fill="none" stroke="#b58900" stroke-width="6" />
                            <text x="120" y="15" font-family="Courier Prime" font-size="10" fill="#b58900">Bề Mặt Da</text>
                            
                            <!-- Blood Vessel -->
                            <path id="vessel" d="M0,100 Q150,80 300,100" fill="none" stroke="#cb4b16" stroke-width="8" stroke-linecap="round">
                                <animate attributeName="stroke-width" values="8;16;8" dur="4s" repeatCount="indefinite" />
                                <animate attributeName="stroke" values="#cb4b16;#dc322f;#cb4b16" dur="4s" repeatCount="indefinite" />
                            </path>
                            
                            <!-- Heat arrows -->
                            <g id="heat-arrows">
                                <path d="M150,80 L150,40" stroke="#cb4b16" stroke-width="2" marker-end="url(#arrowhead)">
                                    <animate attributeName="opacity" values="0.2;1;0.2" dur="4s" repeatCount="indefinite" />
                                    <animate attributeName="d" values="M150,90 L150,50; M150,80 L150,30; M150,90 L150,50" dur="4s" repeatCount="indefinite" />
                                </path>
                            </g>
                            
                            <defs>
                                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#cb4b16" />
                                </marker>
                            </defs>
                            
                            <text x="80" y="160" font-family="Courier Prime" font-size="12" fill="#073642">Mạch máu giãn $\rightarrow$ Tỏa nhiệt</text>
                        </svg>
                        <p class="text-xs text-center text-sg-border mt-4 font-retro-body">Hình 3.1: Phản xạ khi trời nóng</p>
                    </div>
                </div>
                <div class="mt-12 text-center">
                    <button onclick="switchTab('tab-test')" class="btn-retro-primary px-10 py-3 text-lg animate-pulse">
                        Làm Bài Kiểm Tra
                    </button>
                </div>
            </section>

             <!-- Tab Content: Test -->
             <section id="tab-content-tab-test" class="tab-content hidden animate-fade-in">
                <div class="bg-[#fdf6e3] p-4 md:p-8 border-2 border-sg-dark shadow-retro relative">
                    <!-- Tem thư trang trí -->
                    <div class="absolute -top-4 -right-4 bg-sg-red text-white p-2 font-retro-head font-bold rotate-12 shadow-lg border-2 border-white">
                        Đề Thi 1960
                    </div>

                    <div class="flex flex-col mb-6 border-b-2 border-sg-dark pb-4">
                        <h2 class="text-3xl font-retro-head font-bold text-sg-teal uppercase text-center">Đề Kiểm Tra Tổng Hợp</h2>
                        <div class="text-center font-retro-body italic mt-2 text-sg-border">Thời gian làm bài: Tự do</div>
                    </div>
                    
                    <div class="w-full h-[600px] border-2 border-sg-dark bg-white p-1">
                        <iframe src="test.html" class="w-full h-full border border-sg-border" title="Bài kiểm tra Sinh Học 8">
                            <p>Trình duyệt của bạn không hỗ trợ iframe.</p>
                        </iframe>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // Data Structure for Tabs
        const tabs = [
            { id: 'intro', label: 'Lời Nói Đầu', icon: '✦' },
            { id: 'tab-1', label: 'Nội Tiết', icon: 'I' },
            { id: 'tab-2', label: 'Da', icon: 'II' },
            { id: 'tab-3', label: 'Thân Nhiệt', icon: 'III' },
            { id: 'tab-test', label: 'Kiểm Tra', icon: '✎' }
        ];

        let currentTabId = 'intro';

        // Initialization
        document.addEventListener('DOMContentLoaded', () => {
            renderTabs();
        });

        // 1. INTRO FUNCTION
        function startLearning() {
            const intro = document.getElementById('intro-overlay');
            const app = document.getElementById('app-container');

            // Hiệu ứng cuộn màn trập lên (Slide Up curtain effect)
            intro.style.transform = 'translateY(-100%)';
            intro.style.opacity = '1'; 
            
            // Show main app
            app.classList.remove('opacity-0');

            setTimeout(() => {
                intro.style.display = 'none';
            }, 800);
        }

        // 2. RENDER TABS
        function renderTabs() {
            const desktopContainer = document.getElementById('desktop-tabs-container');
            const mobileContainer = document.getElementById('mobile-tabs-container');

            desktopContainer.innerHTML = '';
            mobileContainer.innerHTML = '';

            tabs.forEach(tab => {
                // Desktop Button (Thẻ thư viện)
                const btnDesktop = document.createElement('button');
                btnDesktop.className = `px-6 py-4 text-base font-retro-head tracking-wider transition-all duration-200 border-t-2 border-r-2 border-l-2 border-transparent hover:bg-[#eee8d5] hover:text-sg-red focus:outline-none flex items-center gap-2 h-full rounded-t-md mt-2 uppercase`;
                btnDesktop.innerHTML = `<span class="text-xs opacity-70">${tab.icon}</span> ${tab.label}`;
                btnDesktop.dataset.tabId = tab.id;
                btnDesktop.onclick = () => switchTab(tab.id);
                desktopContainer.appendChild(btnDesktop);

                // Mobile Button
                const btnMobile = document.createElement('button');
                btnMobile.className = `w-full text-left px-4 py-4 text-lg font-retro-head font-bold uppercase transition-colors duration-200 hover:bg-[#eee8d5] hover:text-sg-red border-l-4 border-transparent focus:outline-none flex items-center gap-3 border-b border-dashed border-sg-border/30`;
                btnMobile.innerHTML = `<span class="text-sg-teal">${tab.icon}</span> ${tab.label}`;
                btnMobile.dataset.tabId = tab.id;
                btnMobile.onclick = () => {
                    switchTab(tab.id);
                    toggleMenu(); 
                };
                mobileContainer.appendChild(btnMobile);
            });

            updateActiveTabUI();
            showTabContent();
        }

        // 3. SWITCH TAB LOGIC
        function switchTab(id) {
            currentTabId = id;
            updateActiveTabUI();
            showTabContent();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateActiveTabUI() {
            // Update Desktop Tabs
            document.querySelectorAll('#desktop-tabs-container button').forEach(btn => {
                if (btn.dataset.tabId === currentTabId) {
                    btn.classList.add('active-tab');
                    btn.classList.remove('border-transparent');
                    btn.classList.add('border-sg-border', 'border-b-[#fdf6e3]'); // Tricky border bottom to blend with bg
                } else {
                    btn.classList.remove('active-tab', 'border-sg-border', 'border-b-[#fdf6e3]');
                    btn.classList.add('border-transparent', 'text-sg-border');
                }
            });

            // Update Mobile Tabs
            document.querySelectorAll('#mobile-tabs-container button').forEach(btn => {
                if (btn.dataset.tabId === currentTabId) {
                    btn.classList.add('active-mobile-tab');
                } else {
                    btn.classList.remove('active-mobile-tab');
                }
            });
        }

        function showTabContent() {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            const activeContent = document.getElementById(`tab-content-${currentTabId}`);
            if (activeContent) {
                activeContent.classList.remove('hidden');
            }
        }

        // 4. MOBILE MENU LOGIC
        function toggleMenu() {
            const menu = document.getElementById('mobile-menu');
            const overlay = document.getElementById('mobile-menu-overlay');
            
            const isClosed = menu.classList.contains('-translate-x-full');

            if (isClosed) {
                menu.classList.remove('-translate-x-full');
                menu.classList.add('translate-x-0');
                overlay.classList.remove('hidden');
            } else {
                menu.classList.add('-translate-x-full');
                menu.classList.remove('translate-x-0');
                overlay.classList.add('hidden');
            }
        }
    </script>
</body>
</html>